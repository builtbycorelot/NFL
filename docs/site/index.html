<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NodeForm Language</title>
  <link rel="stylesheet" href="assets/nfl-genesis.css">
</head>
<body>
  <h1>NodeForm Language (NFL)</h1>
  <p>Welcome to the public reference for the NodeForm Language. Use the links below to explore the specification and interactive graph viewer.</p>
  <ul>
    <li><a href="visualizer.html">Interactive Graph Viewer</a></li>
    <li><a href="explorer.html">JSON Explorer</a></li>
    <li><a href="examples/index.nfl.json">Canonical NFL Graph</a></li>
    <li><a href="overview.html">Project Overview</a></li>
    <li><a href="docs/context.md">Context</a></li>
    <li><a href="docs/ledger.md">SemanticLedger</a></li>
    <li><a href="docs/crosswalks.md">Crosswalks</a></li>
    <li><a href="docs/api.md">API Server</a></li>
    <li><a href="docs/render_deployment.md">Render Deployment</a></li>
    <li><a href="https://nfl-s9by.onrender.com">Live Service</a></li>
  </ul>
  <p>See the <a href="https://builtbycorelot.github.io/NFL">GitHub Pages site</a> for a hosted version.</p>

  <h2>API Usage</h2>
  <p>The HTTP API is served from the same base URL as this page. Common routes:</p>
  <pre>
GET /health
GET /db/health
GET /info
POST /api/cypher
POST /api/sql
POST /api/import
GET /api/examples
  </pre>
  <p>Download the <a href="openapi.json">OpenAPI specification</a> and open it with
    <a href="https://petstore.swagger.io/?url=https://raw.githubusercontent.com/builtbycorelot/NFL/main/openapi.json">Swagger UI</a>
    for interactive documentation.</p>

  <h2>Service Health</h2>
  <pre id="health">Loading...</pre>

  <script>
    async function loadHealth() {
      try {
        const [dbResp, infoResp] = await Promise.all([
          fetch('db/health'),
          fetch('info')
        ]);
        const db = await dbResp.json();
        const info = await infoResp.json();
        const lines = [
          `Neo4j: ${db.neo4j} (${db.latency_ms.neo4j} ms)`,
          `SQLite: ${db.sqlite} (${db.latency_ms.sqlite} ms)`,
          `Version: ${info.version}`,
          `Build: ${info.build_sha}`,
          `Started: ${info.start_time}`
        ];
        document.getElementById('health').textContent = lines.join('\n');
      } catch (err) {
        document.getElementById('health').textContent = 'Unable to load metrics';
      }
    }
    document.addEventListener('DOMContentLoaded', loadHealth);
  </script>
</body>
</html>
